<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

<head>
	<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1">
	<title>Running NairnMPM</title>
	<link rel="stylesheet" type="text/css" href="../help.css">
</head>

<body>

<p class="links">
<a href="../index.html">Home</a> &rarr;
<a href="../startup/index.html">Getting Started</a> &rarr;
Running
</p>

<h1>Running NairnFEA and NairnMPM</h1>

<p>This page has information on running <code>NairnFEA</code> finite element calculations and <code>NairnMPM</code> material point method calculations. If you just compiled the code, it includes information on doing a test <a href="#trialFEA">FEA</a> or <a href="#trialMPM">MPM</a> calculation.
The options for running calculations are:
</p>

<ul>
<li><a href="#macosx">Running in Mac OS X using the <b>NairnFEAMPM</b> Visual Front End Application</a>

<li><a href="#javaviz">Running on any platform using the <b>NairnFEAMPMViz</b> Visual Front End Java Application</a>

<li>Command-Line Execution on any Platform
<ul>
<li><a href="#runFEA">Running <code>NairnFEA</code> calculations</a>
<li><a href="#runMPM">Running <code>NairnMPM</code> calculations</a>
</li>
</ul>
</li>

</ul>

<h1><a name="macosx"></a>Running Using <b>NairnFEAMPM</b> (Macintosh OS X only)</h1>

<p>If you are using a Mac (with MacOS 10.4 or newer, Tiger), you can go to the <a href="http://oregonstate.edu/~nairnj/NairnFEAMPM/index.html"><b>NairnFEAMPM</b> web site</a> and download a complete package that lets you create input files using a command language or raw <code>XML</code> commands, run calculations, and visualize the results. This package only works in MacOS X and does not include the <code>NairnFEA</code> or <code>NairnMPM</code> source code.
</p>

<p>If you are working directly with the source code, you can also run calculations using <a href="http://oregonstate.edu/~nairnj/NairnFEAMPM/index.html"><b>NairnFEAMPM</b></a>, but there are few settings that are important
</p>

<ul>

<li>The downloaded <a href="http://oregonstate.edu/~nairnj/NairnFEAMPM/index.html"><b>NairnFEAMPM</b></a> containts the <code>NairnFEA</code> and <code>NairnMPM</code> binaries and <code>DTD</code> files within the application. If you are recompiling the code, you will want <b>NairnFEAMPM</b> to use your new versions rather than these default versions. To make this change:
<ol class="alpha">
<li>Start <b>NairnFEAMPM</b>
<li>Choose &quot;NairnFEAMPM &rarr; Preferences...&quot; menu command
<li>Click the &quot;Code&quot; tab
<li>Enter paths to your compiled binaries and <code>DTD</code> files.
</ol>
</li>

<li>To do a test calculation, choose the &quot;New &rarr; FEA Example&quot; or &quot;New &rarr; MPM Example&quot; command, and then choose the &quot;Analyze &rarr; Run FEA/MPM Analysis&quot; command (you will need to save the example file first).
</li>

<li>See the <b>NairnFEAMPM</b> application help information for more details on running calculations and on visualizing results.
</li>

</ul>

<h1><a name="javaviz"></a>Running Using NairnFEAMPMViz Java Application (any platform)</h1>

<p>You can run and visualize <code>NairnFEA</code> and <code>NairnMPM</code> calculations on any platform using the <b>NairnFEAMPMViz</b> Java application (<b>note</b>: if you are using a Mac (with MacOS 10.4 or newer, Tiger), <b>NairnFEAMPMViz</b> will work, but the recommendation is to use <a href="#macosx"><b>NairnFEAMPM</b></a> because it faster and has more features). <b>NairnFEAMPMViz</b> started out only as a visualization tool, but now it lets you create and edit input XML files, launch calculation tasks, and visualize the results.
<p>

<p><b>NairnFEAMPMViz</b> is a Java application and therefore to run it, you need it's jar file. This file is not included in the <code>Nairn-MPM-FEA</code> package. You have two options:</p>

<ol>
<li>Compile the <b>NairnFEAMPMViz</b> source code. Click <a href="../startup/nairnviz.html#compiling">here</a> for details on this approach.</li>

<li>Download the jar from the the <a href="http://code.google.com/p/nairn-mpm-fea/downloads/list"><code>nairn-mpm-fea</code> project downloads</a> page. Compiling the source code will always get you the latest version, but the download might be good enough (and is easier if you just want to verify with a test run).</li>

</ol>

<p>Once the <b>NairnFEAMPMViz</b> jar file is ready, you need to launch it using a method to make sure it gets enough memory. The method is described <a href="../startup/nairnviz.html#runningViz">here</a>. Once the application is started, do a test run as follows:

<ul>

<li>The first time you run <b>NairnFEAMPMViz</b>, you have to tell the application the location of the <code>NairnFEA</code> and <code>NairnMPM</code> code engines and of a Unix shell. The steps are
<ol class="alpha">
<li>Choose &quot;Preferences...&quot; menu command or click the &quot;Prefs&quot; icon</li>
<li>Click the &quot;Code&quot; tab</li>
<li>Click the first five &quot;Change...&quot; buttons and locate the <code>NairnMPM</code> executable, the <code>NairnMPM.dtd</code> file, the <code>NairnFEA</code> executable, the <code>NairnFEA.dtd</code> file, and the <code>bash</code> shell command, respectively. In Windows, the <code>bash</code> command will be in the <code>bin</code> folder of the root <code>cygwin</code> folder; in other systems, it will be in the <code>/bin</code> folder.</li>
<li>Optionally click the last &quot;Change...&quot; button and select a work space directory. When a directory is selected, <b>NairnFEAMPMViz</b> will default to this directory when opening and saving files.
</ol>
</li>

<li>To do a test calculation, choose the &quot;File &rarr; New FEA Commands&quot; or &quot;File &rarr; New MPM Commands&quot; menu commands (or click their icons). These will open a file with sample <code>XML</code> commands. Save the new commands to a new file with extension <code>.fmcmd</code>.
</li>

<li>To run an analysis, choose the &quot;Analyze &rarr; Run FEA/MPM Analysis&quot; command (or click the run arrow icon). You will asked to decide where to save the results (as an <code>.fea</code> or <code>.mpm</code> file). Once you select a name, the calculations will run. When the calculations are done, the results file will open for visualization.</li>

<li>See the <b>NairnFEAMPMViz</b> application help information for more details on running calculations and on visualizing results.
</li>

</ul>

<h1><a name="runFEA"></a>Running NairnFEA</h1>

<h2>Command-Line Execution</h2>
<p>
You can run <code>NairnFEA</code> from a Unix or Linux command line using:
</p>

<pre>
NairnFEA [options] input > output
</pre>

<p>where</p>

<dl>
<dt>[options]</dt>
<dd>The options may be one or more of the following:

<dl>

<dt>-v</dt>
<dd>Validate the input <code>XML</code> using the <code>DTD</code> file specified in the <code>!DOCTYPE</code> line in the preamble of the input file. If the specified <code>DTD</code> can not be found, the code will exit with an error message. If the input file has no <code>!DOCTYPE</code>, the validation will be skipped. The required <code>DTD</code> file can be found in the <code>input</code> directory of the <a href="../startup/organize.html">source files</a>.</dd>

<dt>-a</dt>
<dd>Read the input file, set up the mesh and all boundary conditions and then abort before any calculations. This option is useful to check that all commands have created the mesh and boundary conditions correctly before actually doing the analysis in a subsequent run.</dd>

<dt>-w</dt>
<dd>When this option is not used, relative file names for output files and for input of bmp files are resolved as being relatve to the input file. When this option is used, the file names are resolved instead to the current working directory.</dd>

<dt>-H</dt>
<dd>Display brief help message and then exit.</dd>

</dl>

Multiple options can use separate options, such as <code>-v -r</code> , or combine them in one option, such as <code>-vr</code>.
</dd>

 
<dt>input</dt>
<dd>The path name of the input <code>XML</code> file. The preferred extension for the input files is &quot;<code>.fmcmd</code>&quot;.</dd>

<dt>output</dt>
<dd>The name of the output text file. The output of NairnFEA is to standard output and redirection should be used to save the output to a file. The preferred extension for the output file is &quot;<code>.fea</code>&quot;.</dd>

</dl>


<a name="trialFEA"></a><h2>Trial FEA Run</h2>

<p>After <a href="../startup/index.html">compiling</a> the code, you can do a trial run with the following commands:
</p>

<pre>
cd nairn-mpm-fea/NairnFEA/input
./NairnMPM Cantilever.fmcmd > output.fea
</pre>

<p>The sample FEA calculation of an end-loaded cantilever beam will finish quickly. The file <code>output.fea</code> will have the text output results.
</p>

<p>To verify the results requires visualization tools. See the <a href="../startup/nairnviz.html">visualization options</a> section for the possible tools. The image below shows plot of stress in the <code>x</code>-direction for this sample problem.
</p>
<center>
<img src = "beam.jpg" alt = "beam example" align="center"/>
</center>

<h1><a name="runMPM"></a>Running NairnMPM</h1>

<h2>Command-Line Execution</h2>
<p>
You can run NairnMPM from a Unix or Linux command line using:
</p>

<pre>
NairnMPM [options] input > output
</pre>

<p>where</p>

<dl>
<dt>[options]</dt>
<dd>The options may be one or more of the following:

<dl>

<dt>-v</dt>
<dd>Validate the input <code>XML</code> using the <code>DTD</code> file specified in the <code>!DOCTYPE</code> line in the preamble of the file. If the specified <code>DTD</code> can not be found, the code will exit with an error message. If the input file has no <code>!DOCTYPE</code>, the validation will be skipped. The required <code>DTD</code> file can be found in the <code>input</code> directory of the <a href="../startup/organize.html">source files</a>.</dd>

<dt>-r</dt>
<dd>Reverse the bytes when writing results to  archive files. This option can be useful when you are running calculations on one computer, but visualizing them on a different computer which uses a different byte order. For example. Macintosh computers and computers with Intel chips use opposite byte orders. This option can be omitted if you analyze on the same computer where you run the calculations or if you have analysis software that works with any byte order (such as all provided <a href="../startup/nairnviz.html">visualization options</a>).</dd>

<dt>-a</dt>
<dd>Start the analysis, archive the initial conditions, and then abort the calculations. This option is useful to check that all commands have created the mesh, assigned material points, and created boundary conditions correctly before actually doing the analysis in a subsequent run.</dd>

<dt>-w</dt>
<dd>When this option is not used, relative file names for output files and for input of bmp files are resolved as being relatve to the input file. When this option is used, the file names are resolved instead to the current working directory.</dd>

<dt>-H</dt>
<dd>display brief help message and then exit.</dd>

</dl>

Multiple options can use separate options, such as <code>-v -r</code> , or combine them in one option, such as <code>-vr</code>.
</dd>

 
<dt>input</dt>
<dd>The path name of the input <code>XML</code> file. The preferred extension for the input files is &quot;<code>.fmcmd</code>&quot;.</dd>

<dt>output</dt>
<dd>The name of the output text file. The output of NairnMPM is to standard output and redirection should be used to save the output to a file. The output file should be saved in the current working directory to insure correct relative paths between the output file and the archive files. The preferred extension for the output file is &quot;<code>.mpm</code>&quot;.</dd>

</dl>

<a name="trialMPM"></a><h2>Trial MPM Run</h2>

<p>After <a href="../startup/index.html">compiling</a> the code, you can do a trial run with the following commands:
</p>

<pre>
cd nairn-mpm-fea/NairnMPM/input
./NairnMPM TwoDisks.fmcmd > output.mpm
</pre>

<p>The sample MPM calculation of two disks colliding should finish in a few seconds. The file <code>output.mpm</code> will have the text output results. The archive files should be in a folder created in that directory called <code>TwoDisks</code>.
</p>

<p>To verify the results requires visualization tools. See the <a href="../startup/nairnviz.html">visualization options</a> section for the possible tools. The image below shows plot of stress in the <code>x</code>-direction at three different times. Click <a href="disks.mov">here</a> to see a short movie of the same stress.
</p>
<center>
<img src = "diskframes.jpg" alt = "two disks example" align="center"/>
</center>

<p class="links">
<a href="../index.html">Home</a> &rarr;
<a href="../startup/index.html">Getting Started</a> &rarr;
Running
</p>

</body>

</html>